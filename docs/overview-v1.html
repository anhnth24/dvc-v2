<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DVC v2 - Government Administrative Procedure Management System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e1e5e9;
            line-height: 1.6;
            overflow-x: auto;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #64b5f6, #42a5f5, #2196f3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #b0bec5;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(100, 181, 246, 0.1), rgba(66, 165, 245, 0.05));
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(100, 181, 246, 0.2);
            text-align: center;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            color: #64b5f6;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #90a4ae;
            margin-top: 5px;
        }

        .section {
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #64b5f6;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .layer-card {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(123, 31, 162, 0.05));
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .layer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.2);
        }

        .layer-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ce93d8;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .layer-content {
            list-style: none;
        }

        .layer-content li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #b39ddb;
        }

        .layer-content li:last-child {
            border-bottom: none;
        }

        .workflow-phases {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .phase-card {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(56, 142, 60, 0.05));
            border: 1px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }

        .phase-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4caf50, #66bb6a);
        }

        .phase-number {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: rgba(76, 175, 80, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #81c784;
        }

        .phase-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #81c784;
            margin-bottom: 15px;
        }

        .phase-steps {
            list-style: none;
        }

        .phase-steps li {
            padding: 6px 0;
            color: #a5d6a7;
            position: relative;
            padding-left: 20px;
        }

        .phase-steps li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: #4caf50;
        }

        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tech-category {
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(251, 140, 0, 0.05));
            border: 1px solid rgba(255, 152, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
        }

        .tech-category h4 {
            color: #ffb74d;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .tech-list {
            list-style: none;
        }

        .tech-list li {
            padding: 5px 0;
            color: #ffcc02;
            font-size: 0.9rem;
        }

        .database-overview {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(30, 136, 229, 0.05));
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .db-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .db-stat {
            text-align: center;
            padding: 15px;
            background: rgba(33, 150, 243, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .db-stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #42a5f5;
            display: block;
        }

        .db-stat-label {
            font-size: 0.8rem;
            color: #90caf9;
            margin-top: 5px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(139, 195, 74, 0.1), rgba(124, 179, 66, 0.05));
            border: 1px solid rgba(139, 195, 74, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #9ccc65;
            display: block;
        }

        .metric-target {
            font-size: 0.9rem;
            color: #aed581;
            margin-top: 5px;
        }

        .metric-status {
            margin-top: 8px;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            background: rgba(139, 195, 74, 0.2);
            color: #8bc34a;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-category {
            background: linear-gradient(135deg, rgba(233, 30, 99, 0.1), rgba(216, 27, 96, 0.05));
            border: 1px solid rgba(233, 30, 99, 0.3);
            border-radius: 12px;
            padding: 25px;
        }

        .feature-title {
            color: #f06292;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .feature-list {
            list-style: none;
        }

        .feature-list li {
            padding: 8px 0;
            color: #f8bbd9;
            position: relative;
            padding-left: 25px;
        }

        .feature-list li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #e91e63;
            font-weight: bold;
        }

        .icon {
            font-size: 1.2rem;
        }

        .mermaid-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-x: auto;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            background: transparent;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .architecture-grid,
            .workflow-phases,
            .tech-stack,
            .performance-grid,
            .features-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>üèõÔ∏è DVC v2 - Government Administrative System</h1>
            <p>Comprehensive Administrative Procedure Management Platform</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">25,000</span>
                    <span class="stat-label">Civil Servants</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">21,000</span>
                    <span class="stat-label">Concurrent Users</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">800K</span>
                    <span class="stat-label">Documents/Month</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">270</span>
                    <span class="stat-label">Docs/Second</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">99.9%</span>
                    <span class="stat-label">Availability</span>
                </div>
            </div>
        </div>

        <!-- System Architecture -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üèóÔ∏è</span>
                System Architecture
            </h2>
            
            <div class="architecture-grid">
                <div class="layer-card">
                    <div class="layer-title">
                        <span class="icon">üñ•Ô∏è</span>
                        Frontend Layer
                    </div>
                    <ul class="layer-content">
                        <li>NextJS 14 with SSR/SSG</li>
                        <li>React 18 + TypeScript</li>
                        <li>Tailwind CSS Styling</li>
                        <li>SignalR Real-time</li>
                        <li>Zustand State Management</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <div class="layer-title">
                        <span class="icon">üîå</span>
                        API Gateway
                    </div>
                    <ul class="layer-content">
                        <li>YARP 2.0 Reverse Proxy</li>
                        <li>Load Balancing</li>
                        <li>Rate Limiting</li>
                        <li>Authentication</li>
                        <li>Route Management</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <div class="layer-title">
                        <span class="icon">‚öôÔ∏è</span>
                        Backend Services
                    </div>
                    <ul class="layer-content">
                        <li>.NET 8 Microservices</li>
                        <li>Elsa 3.0 Workflow Engine</li>
                        <li>Clean Architecture</li>
                        <li>JWT Authentication</li>
                        <li>FluentValidation</li>
                    </ul>
                </div>

                <div class="layer-card">
                    <div class="layer-title">
                        <span class="icon">üìä</span>
                        Data Layer
                    </div>
                    <ul class="layer-content">
                        <li>SQL Server 2022 (63 tables)</li>
                        <li>Redis Enterprise Cluster</li>
                        <li>MinIO Object Storage</li>
                        <li>Elasticsearch Search</li>
                        <li>RabbitMQ Messaging</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Workflow Phases -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üîÑ</span>
                System Workflow Phases
            </h2>
            
            <div class="workflow-phases">
                <div class="phase-card">
                    <div class="phase-number">1</div>
                    <div class="phase-title">System Configuration</div>
                    <ul class="phase-steps">
                        <li>Procedure Definition</li>
                        <li>Unit Assignment</li>
                        <li>Workflow Design (BPMN)</li>
                        <li>Step Configuration</li>
                        <li>Role Assignment</li>
                    </ul>
                </div>

                <div class="phase-card">
                    <div class="phase-number">2</div>
                    <div class="phase-title">Document Intake</div>
                    <ul class="phase-steps">
                        <li>Document Submission</li>
                        <li>File Upload & Validation</li>
                        <li>Workflow Initialization</li>
                        <li>Auto-assignment</li>
                        <li>SLA Timer Start</li>
                    </ul>
                </div>

                <div class="phase-card">
                    <div class="phase-number">3</div>
                    <div class="phase-title">Document Processing</div>
                    <ul class="phase-steps">
                        <li>Auto Task Assignment</li>
                        <li>Officer Review</li>
                        <li>Document Processing</li>
                        <li>Approval Workflow</li>
                        <li>Digital Signature</li>
                    </ul>
                </div>

                <div class="phase-card">
                    <div class="phase-number">4</div>
                    <div class="phase-title">Result Delivery</div>
                    <ul class="phase-steps">
                        <li>Result Generation</li>
                        <li>Delivery Method</li>
                        <li>Notification System</li>
                        <li>Status Update</li>
                        <li>Workflow Completion</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Database Overview -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üóÑÔ∏è</span>
                Database Architecture
            </h2>
            
            <div class="database-overview">
                <h3 style="color: #42a5f5; margin-bottom: 15px;">63 Tables Organized by Function</h3>
                
                <div class="db-stats">
                    <div class="db-stat">
                        <span class="db-stat-number">14</span>
                        <span class="db-stat-label">Document Core</span>
                    </div>
                    <div class="db-stat">
                        <span class="db-stat-number">9</span>
                        <span class="db-stat-label">Workflow</span>
                    </div>
                    <div class="db-stat">
                        <span class="db-stat-number">10</span>
                        <span class="db-stat-label">RBAC</span>
                    </div>
                    <div class="db-stat">
                        <span class="db-stat-number">21</span>
                        <span class="db-stat-label">National Reference</span>
                    </div>
                    <div class="db-stat">
                        <span class="db-stat-number">6</span>
                        <span class="db-stat-label">Configuration</span>
                    </div>
                    <div class="db-stat">
                        <span class="db-stat-number">3</span>
                        <span class="db-stat-label">File Management</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Metrics -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üìà</span>
                Performance Metrics
            </h2>
            
            <div class="performance-grid">
                <div class="metric-card">
                    <span class="metric-value">85ms</span>
                    <span class="metric-target">Target: < 100ms</span>
                    <span class="metric-status">‚úì API Response</span>
                </div>
                <div class="metric-card">
                    <span class="metric-value">1.8s</span>
                    <span class="metric-target">Target: < 2s</span>
                    <span class="metric-status">‚úì Page Load</span>
                </div>
                <div class="metric-card">
                    <span class="metric-value">245/sec</span>
                    <span class="metric-target">Target: 270/sec</span>
                    <span class="metric-status">‚úì Throughput</span>
                </div>
                <div class="metric-card">
                    <span class="metric-value">18ms</span>
                    <span class="metric-target">Target: < 20ms</span>
                    <span class="metric-status">‚úì DB Query</span>
                </div>
                <div class="metric-card">
                    <span class="metric-value">99.95%</span>
                    <span class="metric-target">Target: 99.9%</span>
                    <span class="metric-status">‚úì Uptime</span>
                </div>
                <div class="metric-card">
                    <span class="metric-value">87%</span>
                    <span class="metric-target">Target: 85%</span>
                    <span class="metric-status">‚úì SLA Compliance</span>
                </div>
            </div>
        </div>

        <!-- Technology Stack -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üõ†Ô∏è</span>
                Technology Stack
            </h2>
            
            <div class="tech-stack">
                <div class="tech-category">
                    <h4>Frontend</h4>
                    <ul class="tech-list">
                        <li>NextJS 14</li>
                        <li>React 18 + TypeScript</li>
                        <li>Tailwind CSS</li>
                        <li>Zustand</li>
                        <li>SignalR</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>Backend</h4>
                    <ul class="tech-list">
                        <li>.NET 8</li>
                        <li>Elsa 3.0 Workflow</li>
                        <li>Clean Architecture</li>
                        <li>YARP Gateway</li>
                        <li>FluentValidation</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>Data & Storage</h4>
                    <ul class="tech-list">
                        <li>SQL Server 2022</li>
                        <li>Redis Enterprise</li>
                        <li>MinIO Storage</li>
                        <li>Elasticsearch</li>
                        <li>RabbitMQ</li>
                    </ul>
                </div>
                
                <div class="tech-category">
                    <h4>Infrastructure</h4>
                    <ul class="tech-list">
                        <li>Docker Containers</li>
                        <li>OpenTelemetry</li>
                        <li>Serilog Logging</li>
                        <li>Health Checks</li>
                        <li>Load Balancing</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- System Architecture Diagram -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üèóÔ∏è</span>
                Complete System Architecture
            </h2>
            <div class="mermaid-container">
                <pre class="mermaid">
graph TB
    subgraph "FRONTEND - NextJS 14"
        FE1[Admin Dashboard<br/>Document Management]
        FE2[Workflow Designer<br/>BPMN Visual Editor]
        FE3[Task Management<br/>Officer Workspace]
        FE4[Analytics Dashboard<br/>Reports & Metrics]
    end

    subgraph "API GATEWAY - YARP"
        GW[API Gateway<br/>- Routing<br/>- Load Balancing<br/>- Rate Limiting<br/>- Authentication]
    end

    subgraph "BACKEND SERVICES - .NET 8"
        SVC1[User Service<br/>- Authentication<br/>- RBAC<br/>- User Management]
        SVC2[Document Service<br/>- File Processing<br/>- OCR/Conversion<br/>- Digital Signature]
        SVC3[Workflow Service<br/>- Elsa 3.0 Engine<br/>- BPMN Processing<br/>- State Management]
        SVC4[Notification Service<br/>- Email/SMS<br/>- SignalR Hub<br/>- Templates]
    end

    subgraph "DATA LAYER"
        DB[(SQL Server 2022<br/>- Main Database<br/>- Materialized Views<br/>- 63 Tables)]
        CACHE[(Redis Enterprise<br/>- Session Cache<br/>- Query Cache<br/>- 6-node Cluster)]
        BLOB[(MinIO Storage<br/>- Document Files<br/>- 200-500TB<br/>- S3 Compatible)]
        SEARCH[(Elasticsearch<br/>- Full-text Search<br/>- Audit Logs<br/>- Analytics)]
    end

    subgraph "INTEGRATION"
        MQ[RabbitMQ<br/>- Event Bus<br/>- dvc.events exchange<br/>- Async Processing]
        WORKER1[Email Worker<br/>.NET Service]
        WORKER2[SMS Worker<br/>.NET Service]
        WORKER3[Postal Worker<br/>.NET Service]
        WORKER4[LGSP Worker<br/>.NET Service]
    end

    subgraph "EXTERNAL SYSTEMS"
        EXT1[LGSP<br/>Government Platform]
        EXT2[VietnamPost<br/>Postal Service]
        EXT3[SMS Gateways<br/>Viettel/Mobifone]
        EXT4[National DB<br/>Citizen Database]
        EXT5[PKI Services<br/>Digital Signature]
    end

    %% Connections
    FE1 --> GW
    FE2 --> GW
    FE3 --> GW
    FE4 --> GW

    GW --> SVC1
    GW --> SVC2
    GW --> SVC3
    GW --> SVC4

    SVC1 --> DB
    SVC2 --> DB
    SVC3 --> DB
    SVC4 --> DB

    SVC1 --> CACHE
    SVC2 --> CACHE
    SVC3 --> CACHE

    SVC2 --> BLOB
    SVC3 --> MQ
    SVC4 --> MQ

    DB --> SEARCH

    MQ --> WORKER1
    MQ --> WORKER2
    MQ --> WORKER3
    MQ --> WORKER4

    WORKER1 --> EXT3
    WORKER2 --> EXT3
    WORKER3 --> EXT2
    WORKER4 --> EXT1

    SVC1 --> EXT4
    SVC2 --> EXT5

    classDef frontend fill:#1e3a8a,stroke:#3b82f6,stroke-width:2px,color:#fff
    classDef gateway fill:#059669,stroke:#10b981,stroke-width:2px,color:#fff
    classDef backend fill:#7c2d12,stroke:#ea580c,stroke-width:2px,color:#fff
    classDef data fill:#4338ca,stroke:#6366f1,stroke-width:2px,color:#fff
    classDef integration fill:#be185d,stroke:#ec4899,stroke-width:2px,color:#fff
    classDef external fill:#374151,stroke:#6b7280,stroke-width:2px,color:#fff

    class FE1,FE2,FE3,FE4 frontend
    class GW gateway
    class SVC1,SVC2,SVC3,SVC4 backend
    class DB,CACHE,BLOB,SEARCH data
    class MQ,WORKER1,WORKER2,WORKER3,WORKER4 integration
    class EXT1,EXT2,EXT3,EXT4,EXT5 external
                </pre>
            </div>
        </div>

        <!-- Workflow Processing Flow -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üîÑ</span>
                Document Processing Workflow
            </h2>
            <div class="mermaid-container">
                <pre class="mermaid">
flowchart TD
    START([Document Submission]) --> VALIDATE{File Validation}
    VALIDATE -->|Valid| UPLOAD[Upload to MinIO]
    VALIDATE -->|Invalid| REJECT[Reject & Notify]
    
    UPLOAD --> CREATE[Create HOSO Record]
    CREATE --> WORKFLOW[Start Elsa Workflow]
    WORKFLOW --> ASSIGN[Auto-assign Officer]
    
    ASSIGN --> PROCESS[Officer Processing]
    PROCESS --> DECISION{Decision}
    
    DECISION -->|Approve| NEXT[Next Step]
    DECISION -->|Reject| REJECTION[Create Rejection Record]
    DECISION -->|Need Info| SUPPLEMENT[Request Additional Info]
    
    NEXT --> APPROVAL{Requires Approval?}
    APPROVAL -->|Yes| MANAGER[Manager Review]
    APPROVAL -->|No| RESULT[Generate Result]
    
    MANAGER --> SIGN{Digital Signature?}
    SIGN -->|Yes| PKI[PKI Signature]
    SIGN -->|No| APPROVE[Simple Approval]
    
    PKI --> RESULT
    APPROVE --> RESULT
    
    RESULT --> DELIVERY{Delivery Method}
    DELIVERY -->|Online| EMAIL[Email Delivery]
    DELIVERY -->|Postal| POST[Postal Service]
    DELIVERY -->|Pickup| SMS[SMS Notification]
    
    EMAIL --> COMPLETE([Workflow Complete])
    POST --> COMPLETE
    SMS --> COMPLETE
    
    REJECTION --> NOTIFY[Notify Applicant]
    SUPPLEMENT --> NOTIFY
    NOTIFY --> END([End])
    
    COMPLETE --> ARCHIVE[Archive Workflow]
    ARCHIVE --> METRICS[Update Metrics]
    METRICS --> END

    classDef startEnd fill:#059669,stroke:#10b981,stroke-width:3px,color:#fff
    classDef process fill:#1e40af,stroke:#3b82f6,stroke-width:2px,color:#fff
    classDef decision fill:#dc2626,stroke:#ef4444,stroke-width:2px,color:#fff
    classDef external fill:#7c2d12,stroke:#ea580c,stroke-width:2px,color:#fff

    class START,COMPLETE,END,ARCHIVE startEnd
    class VALIDATE,UPLOAD,CREATE,WORKFLOW,ASSIGN,PROCESS,RESULT,EMAIL,POST,SMS,NOTIFY,METRICS process
    class DECISION,APPROVAL,SIGN,DELIVERY decision
    class MANAGER,PKI,APPROVE external
                </pre>
            </div>
        </div>

        <!-- Database Entity Relationships -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üóÑÔ∏è</span>
                Core Database Relationships
            </h2>
            <div class="mermaid-container">
                <pre class="mermaid">
erDiagram
    HOSO {
        guid HoSoID PK
        string MaHoSo UK
        int ThuTucHanhChinhID FK
        int DonViNhan FK
        datetime NgayNhan
        datetime NgayHenTra
        string WorkflowID
        bit DaHoanTat
    }

    DM_QG_THUTUCHANHCHINH {
        int ThuTucID PK
        string MaThuTuc UK
        string TenThuTuc
        int LinhVucID FK
        int ThoiHanXuLy
    }

    HOSO_QUYTRINH {
        guid HoSoQuyTrinhID PK
        string WorkflowInstanceId FK
        guid HoSoID FK
        int TrangThaiQuyTrinh
        datetime NgayBatDau
    }

    PHANCONG_XULY {
        guid PhanCongID PK
        string WorkflowInstanceId FK
        guid HoSoID FK
        string NguoiDuocPhanCongID FK
        datetime HanXuLy
        int TrangThai
    }

    FILEKEMTHEOHOSO {
        guid FileDinhKemHoSoID PK
        guid HoSoID FK
        string FileID
        string FileName
        decimal DungLuongMB
    }

    FILEKETQUA {
        guid FileKetQuaID PK
        guid HoSoID FK
        string FileID
        string FileName
        string WorkflowID FK
    }

    USER {
        guid UserID PK
        string Username UK
        string HoTen
        int PhongBanID FK
        int DonViID FK
    }

    USER_ROLE {
        int UserRoleID PK
        guid UserID FK
        int RoleID FK
        bit IsActive
    }

    ROLE {
        int RoleID PK
        string RoleCode UK
        string RoleName
        bit IsActive
    }

    HOSO ||--|| DM_QG_THUTUCHANHCHINH : "belongs to procedure"
    HOSO ||--o{ HOSO_QUYTRINH : "has workflow instances"
    HOSO ||--o{ FILEKEMTHEOHOSO : "has attachments"
    HOSO ||--o{ FILEKETQUA : "generates results"
    
    HOSO_QUYTRINH ||--o{ PHANCONG_XULY : "creates assignments"
    
    USER ||--o{ PHANCONG_XULY : "assigned tasks"
    USER ||--o{ USER_ROLE : "has roles"
    
    ROLE ||--o{ USER_ROLE : "assigned to users"
                </pre>
            </div>
        </div>

        <!-- RBAC System -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üîê</span>
                Role-Based Access Control Flow
            </h2>
            <div class="mermaid-container">
                <pre class="mermaid">
flowchart TB
    subgraph "USER MANAGEMENT"
        U1[User Login] --> U2[Authenticate]
        U2 --> U3[Load User Roles]
        U3 --> U4[Calculate Permissions]
    end

    subgraph "ROLE HIERARCHY"
        R1[System Roles<br/>Level 1-4]
        R2[Workflow Roles<br/>Dynamic]
        R3[Department Roles<br/>Context-based]
        R4[Temporary Roles<br/>Time-limited]
    end

    subgraph "PERMISSION CHECK"
        P1{Check Permission}
        P2[Module Access]
        P3[Action Allowed]
        P4[Resource Access]
        P5[Grant/Deny]
    end

    subgraph "WORKFLOW INTEGRATION"
        W1[Step Assignment]
        W2[Auto Assignment]
        W3[Load Balancing]
        W4[Delegation]
        W5[Escalation]
    end

    U4 --> R1
    U4 --> R2
    U4 --> R3
    U4 --> R4

    R1 --> P1
    R2 --> P1
    R3 --> P1
    R4 --> P1

    P1 --> P2
    P2 --> P3
    P3 --> P4
    P4 --> P5

    P5 -->|Granted| W1
    W1 --> W2
    W2 --> W3
    W3 --> W4
    W4 --> W5

    classDef user fill:#1e40af,stroke:#3b82f6,stroke-width:2px,color:#fff
    classDef role fill:#7c2d12,stroke:#ea580c,stroke-width:2px,color:#fff
    classDef permission fill:#059669,stroke:#10b981,stroke-width:2px,color:#fff
    classDef workflow fill:#be185d,stroke:#ec4899,stroke-width:2px,color:#fff

    class U1,U2,U3,U4 user
    class R1,R2,R3,R4 role
    class P1,P2,P3,P4,P5 permission
    class W1,W2,W3,W4,W5 workflow
                </pre>
            </div>
        </div>

        <!-- System Monitoring -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üìä</span>
                Real-time System Monitoring
            </h2>
            <div class="mermaid-container">
                <pre class="mermaid">
graph LR
    subgraph "DATA COLLECTION"
        API[API Metrics] --> COLLECT[OpenTelemetry Collector]
        DB[Database Metrics] --> COLLECT
        CACHE[Redis Metrics] --> COLLECT
        QUEUE[RabbitMQ Metrics] --> COLLECT
        APP[Application Logs] --> COLLECT
    end

    subgraph "PROCESSING"
        COLLECT --> PROCESS[Process & Aggregate]
        PROCESS --> STORE[Store in Elasticsearch]
        STORE --> INDEX[Index & Search]
    end

    subgraph "MONITORING"
        INDEX --> DASH[Real-time Dashboard]
        INDEX --> ALERT[Alert System]
        INDEX --> REPORT[Automated Reports]
    end

    subgraph "NOTIFICATIONS"
        ALERT --> EMAIL[Email Alerts]
        ALERT --> SMS[SMS Alerts]
        ALERT --> SLACK[Slack Integration]
    end

    subgraph "SLA TRACKING"
        SLA1[Check SLA Status]
        SLA2[Calculate Metrics]
        SLA3[Generate Warnings]
        SLA4[Escalate Issues]
    end

    DASH --> SLA1
    SLA1 --> SLA2
    SLA2 --> SLA3
    SLA3 --> SLA4
    SLA4 --> ALERT

    classDef collect fill:#1e40af,stroke:#3b82f6,stroke-width:2px,color:#fff
    classDef process fill:#059669,stroke:#10b981,stroke-width:2px,color:#fff
    classDef monitor fill:#be185d,stroke:#ec4899,stroke-width:2px,color:#fff
    classDef notify fill:#dc2626,stroke:#ef4444,stroke-width:2px,color:#fff
    classDef sla fill:#7c2d12,stroke:#ea580c,stroke-width:2px,color:#fff

    class API,DB,CACHE,QUEUE,APP,COLLECT collect
    class PROCESS,STORE,INDEX process
    class DASH,ALERT,REPORT monitor
    class EMAIL,SMS,SLACK notify
    class SLA1,SLA2,SLA3,SLA4 sla
                </pre>
            </div>
        </div>

        <!-- Key Features -->
        <div class="section">
            <h2 class="section-title">
                <span class="icon">üéØ</span>
                Key Features
            </h2>
            
            <div class="features-grid">
                <div class="feature-category">
                    <div class="feature-title">Administrative Management</div>
                    <ul class="feature-list">
                        <li>Visual Workflow Designer</li>
                        <li>Dynamic Process Config</li>
                        <li>Multi-level Approvals</li>
                        <li>SLA Monitoring</li>
                        <li>Load Balancing</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <div class="feature-title">Document Processing</div>
                    <ul class="feature-list">
                        <li>Multi-format Support</li>
                        <li>OCR Integration</li>
                        <li>Digital Signatures</li>
                        <li>File Conversion</li>
                        <li>Virus Scanning</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <div class="feature-title">Integration</div>
                    <ul class="feature-list">
                        <li>LGSP Government Platform</li>
                        <li>Postal Services</li>
                        <li>SMS Gateways</li>
                        <li>Email Templates</li>
                        <li>National Database</li>
                    </ul>
                </div>

                <div class="feature-category">
                    <div class="feature-title">Real-time Features</div>
                    <ul class="feature-list">
                        <li>Live Notifications</li>
                        <li>Progress Tracking</li>
                        <li>Collaborative Editing</li>
                        <li>Dashboard Updates</li>
                        <li>Alert System</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid with dark theme
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#64b5f6',
                primaryTextColor: '#e1e5e9',
                primaryBorderColor: '#42a5f5',
                lineColor: '#90a4ae',
                sectionBkgColor: 'rgba(100, 181, 246, 0.1)',
                altSectionBkgColor: 'rgba(156, 39, 176, 0.1)',
                gridColor: '#546e7a',
                secondaryColor: '#ce93d8',
                tertiaryColor: '#81c784'
            },
            flowchart: {
                htmlLabels: true,
                curve: 'basis'
            },
            er: {
                fill: 'rgba(100, 181, 246, 0.1)',
                primaryColor: '#64b5f6',
                primaryTextColor: '#e1e5e9',
                primaryBorderColor: '#42a5f5',
                lineColor: '#90a4ae'
            }
        });
    </script>
</body>
</html>